{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/inoxwarrior/Harvest/harvest-FE/src/components/posts/SinglePost.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ErrorScreen from '../tempscreens/ErrorScreen';\nimport PostsApi from '../../api/PostsApi';\nimport ChatApi from '../../api/ChatApi';\nimport CommentsPage from '../comments/CommentsPage';\n\nfunction SinglePost() {\n  _s();\n\n  const userEmail = window.sessionStorage.getItem('userEmail');\n  const {\n    state\n  } = useLocation();\n  const passedPost = state === undefined ? null : state.post;\n  const [post, setPost] = useState(passedPost);\n  const history = useHistory();\n  const isPoster = userEmail === post.email;\n\n  const handleClaim = () => {\n    const setClaimed = async () => {\n      try {\n        const response = await PostsApi.updatePost({ ...post,\n          claimed: !post.claimed\n        });\n        setPost(response.data);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    setClaimed();\n  };\n\n  const messageHandler = () => {\n    const createOrDirect = async () => {\n      try {\n        const response = await ChatApi.createThread(post.email, {});\n        const thread = response.data;\n        history.push({\n          pathname: `/chat/${thread.id}`,\n          state: {\n            thread\n          }\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    createOrDirect();\n  };\n\n  try {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"singlePost-card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fliud\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrapper row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"preview col-md-6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"preview-pic tab-content\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tab-pane active\",\n                id: \"pic-1\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: post.imageUrl,\n                  alt: \"Single post img\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 48,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"details col-md-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"product-title\",\n              children: post.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rating\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"stars\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"fa fa-star checked\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"fa fa-star checked\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 57,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"fa fa-star checked\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"fa fa-star unchecked\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"fa fa-star unchecked\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 60,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"review-no\",\n                children: \"41 reviews\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 62,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"product-description\",\n              children: post.body\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CommentsPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"action\",\n              children: [isPoster ? /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"singlePost-btn btn btn-default\",\n                onClick: handleClaim,\n                type: \"button\",\n                children: post.claimed ? 'Set Available' : 'Set Claimed'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 19\n              }, this) : null, isPoster ? null : /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"singlePost-btn btn btn-default\",\n                onClick: messageHandler,\n                type: \"button\",\n                children: \"Message Poster\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"like btn btn-default\",\n                type: \"button\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"fa fa-heart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  } catch (e) {\n    console.log(e);\n    return /*#__PURE__*/_jsxDEV(ErrorScreen, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 12\n    }, this);\n  }\n}\n\n_s(SinglePost, \"TVJ980IwLyfUYCBguIP8QXvCor8=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = SinglePost;\nexport default SinglePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"SinglePost\");","map":{"version":3,"sources":["/Users/inoxwarrior/Harvest/harvest-FE/src/components/posts/SinglePost.jsx"],"names":["React","useState","useHistory","useLocation","ErrorScreen","PostsApi","ChatApi","CommentsPage","SinglePost","userEmail","window","sessionStorage","getItem","state","passedPost","undefined","post","setPost","history","isPoster","email","handleClaim","setClaimed","response","updatePost","claimed","data","e","console","log","messageHandler","createOrDirect","createThread","thread","push","pathname","id","imageUrl","title","body"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ErrorScreen from '../tempscreens/ErrorScreen';\nimport PostsApi from '../../api/PostsApi';\nimport ChatApi from '../../api/ChatApi';\nimport CommentsPage from '../comments/CommentsPage';\n\nfunction SinglePost() {\n  const userEmail = window.sessionStorage.getItem('userEmail');\n  const { state } = useLocation();\n  const passedPost = state === undefined ? null : state.post;\n  const [post, setPost] = useState(passedPost);\n  const history = useHistory();\n  const isPoster = userEmail === post.email;\n\n  const handleClaim = () => {\n    const setClaimed = async () => {\n      try {\n        const response = await PostsApi.updatePost({ ...post, claimed: !post.claimed });\n        setPost(response.data);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n    setClaimed();\n  };\n\n  const messageHandler = () => {\n    const createOrDirect = async () => {\n      try {\n        const response = await ChatApi.createThread(post.email, {});\n        const thread = response.data;\n        history.push({ pathname: `/chat/${thread.id}`, state: { thread } });\n      } catch (e) {\n        console.log(e);\n      }\n    };\n    createOrDirect();\n  };\n  try {\n    return (\n      <div className=\"singlePost-card\">\n        <div className=\"container-fliud\">\n          <div className=\"wrapper row\">\n            <div className=\"preview col-md-6\">\n              <div className=\"preview-pic tab-content\">\n                <div className=\"tab-pane active\" id=\"pic-1\">\n                  <img src={post.imageUrl} alt=\"Single post img\" />\n                </div>\n              </div>\n            </div>\n            <div className=\"details col-md-6\">\n              <h3 className=\"product-title\">{post.title}</h3>\n              <div className=\"rating\">\n                <div className=\"stars\">\n                  <span className=\"fa fa-star checked\"></span>\n                  <span className=\"fa fa-star checked\"></span>\n                  <span className=\"fa fa-star checked\"></span>\n                  <span className=\"fa fa-star unchecked\"></span>\n                  <span className=\"fa fa-star unchecked\"></span>\n                </div>\n                <span className=\"review-no\">41 reviews</span>\n              </div>\n              <p className=\"product-description\">{post.body}</p>\n\n              <CommentsPage />\n\n              <div className=\"action\">\n                {isPoster ? (\n                  <button\n                    className=\"singlePost-btn btn btn-default\"\n                    onClick={handleClaim}\n                    type=\"button\">\n                    {post.claimed ? 'Set Available' : 'Set Claimed'}\n                  </button>\n                ) : null}\n\n                {isPoster ? null : (\n                  <button\n                    className=\"singlePost-btn btn btn-default\"\n                    onClick={messageHandler}\n                    type=\"button\">\n                    Message Poster\n                  </button>\n                )}\n\n                <button className=\"like btn btn-default\" type=\"button\">\n                  <span className=\"fa fa-heart\"></span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n      </div>\n    );\n  } catch (e) {\n    console.log(e);\n    return <ErrorScreen />;\n  }\n}\nexport default SinglePost;\n"]},"metadata":{},"sourceType":"module"}